<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional PDF Toolkit</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10,9 9,9 8,9"/>
                    </svg>
                    PDF Toolkit Pro
                </h1>
                <div class="header-actions">
                    <button class="btn btn-outline" onclick="showHelp()">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <circle cx="12" cy="17" r="0.5"/>
                        </svg>
                        Help
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="tool-section">
                    <h3 class="section-title">Tools</h3>
                    <nav class="tool-nav">
                        <button class="tool-btn active" data-tool="viewer">
                            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            PDF Viewer
                        </button>
                        <button class="tool-btn" data-tool="merger">
                            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                            </svg>
                            Merge PDFs
                        </button>
                        <button class="tool-btn" data-tool="splitter">
                            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8"/>
                                <path d="M12 11l-2 2 2 2"/>
                                <path d="M12 11l2 2-2 2"/>
                            </svg>
                            Split PDF
                        </button>
                        <button class="tool-btn" data-tool="extractor">
                            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                                <path d="M9 7h6"/>
                                <path d="M9 11h6"/>
                                <path d="M9 15h4"/>
                            </svg>
                            Extract Text
                        </button>
                        <button class="tool-btn" data-tool="converter">
                            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="16 18 22 12 16 6"/>
                                <polyline points="8 6 2 12 8 18"/>
                            </svg>
                            Convert
                        </button>
                        <button class="tool-btn" data-tool="watermark">
                            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            Watermark
                        </button>
                        <button class="tool-btn" data-tool="optimizer">
                            <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M3 3v18h18"/>
                                <path d="M7 12l3-3 3 3 5-5"/>
                            </svg>
                            Optimize
                        </button>
                    </nav>
                </div>

                <div class="file-info" id="fileInfo" style="display: none;">
                    <h3 class="section-title">File Information</h3>
                    <div class="info-item">
                        <span class="info-label">Name:</span>
                        <span class="info-value" id="fileName">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Size:</span>
                        <span class="info-value" id="fileSize">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Pages:</span>
                        <span class="info-value" id="pageCount">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Created:</span>
                        <span class="info-value" id="createdDate">-</span>
                    </div>
                </div>
            </aside>

            <!-- Work Area -->
            <section class="work-area">
                <!-- PDF Viewer Tool -->
                <div class="tool-panel active" id="viewer-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">PDF Viewer</h2>
                        <div class="panel-actions">
                            <input type="file" id="viewerFileInput" accept=".pdf" style="display: none;">
                            <button class="btn btn-primary" onclick="document.getElementById('viewerFileInput').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Open PDF
                            </button>
                        </div>
                    </div>
                    <div class="viewer-container">
                        <div class="viewer-toolbar">
                            <button class="toolbar-btn" id="prevPage" disabled>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <polyline points="15 18 9 12 15 6"/>
                                </svg>
                            </button>
                            <span class="page-info">
                                Page <span id="currentPage">0</span> of <span id="totalPages">0</span>
                            </span>
                            <button class="toolbar-btn" id="nextPage" disabled>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <polyline points="9 18 15 12 9 6"/>
                                </svg>
                            </button>
                            <div class="zoom-controls">
                                <button class="toolbar-btn" id="zoomOut">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="11" cy="11" r="8"/>
                                        <path d="M21 21l-4.35-4.35"/>
                                        <line x1="8" y1="11" x2="14" y2="11"/>
                                    </svg>
                                </button>
                                <span id="zoomLevel">100%</span>
                                <button class="toolbar-btn" id="zoomIn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="11" cy="11" r="8"/>
                                        <path d="M21 21l-4.35-4.35"/>
                                        <line x1="11" y1="8" x2="11" y2="14"/>
                                        <line x1="8" y1="11" x2="14" y2="11"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="pdf-display">
                            <canvas id="pdfCanvas" style="display: none;"></canvas>
                            <div class="drop-zone" id="viewerDropZone">
                                <svg class="drop-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <polyline points="14,2 14,8 20,8"/>
                                </svg>
                                <p>Drop PDF file here or click "Open PDF" to get started</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Merge PDFs Tool -->
                <div class="tool-panel" id="merger-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Merge PDFs</h2>
                        <div class="panel-actions">
                            <input type="file" id="mergerFileInput" accept=".pdf" multiple style="display: none;">
                            <button class="btn btn-outline" onclick="document.getElementById('mergerFileInput').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Add Files
                            </button>
                            <button class="btn btn-primary" onclick="mergePDFs()" disabled id="mergeBtn">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                                </svg>
                                Merge PDFs
                            </button>
                        </div>
                    </div>
                    <div class="file-list" id="mergeFileList">
                        <div class="empty-state">
                            <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8"/>
                            </svg>
                            <p>No files selected</p>
                            <p class="empty-subtitle">Add PDF files to merge them together</p>
                        </div>
                    </div>
                </div>

                <!-- Split PDF Tool -->
                <div class="tool-panel" id="splitter-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Split PDF</h2>
                        <div class="panel-actions">
                            <input type="file" id="splitterFileInput" accept=".pdf" style="display: none;">
                            <button class="btn btn-outline" onclick="document.getElementById('splitterFileInput').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Select PDF
                            </button>
                        </div>
                    </div>
                    <div class="split-options" id="splitOptions" style="display: none;">
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="splitType" value="pages" checked>
                                Split by Page Range
                            </label>
                            <div class="range-inputs">
                                <input type="number" id="startPage" placeholder="Start page" min="1">
                                <span>to</span>
                                <input type="number" id="endPage" placeholder="End page" min="1">
                            </div>
                        </div>
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="splitType" value="each">
                                Split Each Page
                            </label>
                        </div>
                        <button class="btn btn-primary" onclick="splitPDF()" id="splitBtn">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8"/>
                                <path d="M12 11l-2 2 2 2"/>
                                <path d="M12 11l2 2-2 2"/>
                            </svg>
                            Split PDF
                        </button>
                    </div>
                    <div class="empty-state" id="splitEmptyState">
                        <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                        </svg>
                        <p>No PDF selected</p>
                        <p class="empty-subtitle">Select a PDF file to split</p>
                    </div>
                </div>

                <!-- Text Extractor Tool -->
                <div class="tool-panel" id="extractor-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Extract Text</h2>
                        <div class="panel-actions">
                            <input type="file" id="extractorFileInput" accept=".pdf" style="display: none;">
                            <button class="btn btn-outline" onclick="document.getElementById('extractorFileInput').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Select PDF
                            </button>
                            <button class="btn btn-primary" onclick="extractText()" disabled id="extractBtn">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                                </svg>
                                Extract Text
                            </button>
                        </div>
                    </div>
                    <div class="text-output" id="textOutput" style="display: none;">
                        <div class="output-header">
                            <h3>Extracted Text</h3>
                            <button class="btn btn-outline" onclick="copyExtractedText()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                </svg>
                                Copy
                            </button>
                        </div>
                        <textarea id="extractedText" readonly></textarea>
                    </div>
                    <div class="empty-state" id="extractorEmptyState">
                        <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                        <p>No PDF selected</p>
                        <p class="empty-subtitle">Select a PDF file to extract text</p>
                    </div>
                </div>

                <!-- Converter Tool -->
                <div class="tool-panel" id="converter-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Convert Files</h2>
                        <div class="panel-actions">
                            <input type="file" id="converterFileInput" accept="image/*,.txt,.html" multiple style="display: none;">
                            <button class="btn btn-outline" onclick="document.getElementById('converterFileInput').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Add Files
                            </button>
                        </div>
                    </div>
                    <div class="converter-options" id="converterOptions" style="display: none;">
                        <div class="option-group">
                            <label class="option-label">Output Format:</label>
                            <select id="outputFormat">
                                <option value="pdf">PDF</option>
                                <option value="images">Extract as Images</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="convertFiles()" id="convertBtn">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="16 18 22 12 16 6"/>
                                <polyline points="8 6 2 12 8 18"/>
                            </svg>
                            Convert
                        </button>
                    </div>
                    <div class="file-list" id="converterFileList">
                        <div class="empty-state">
                            <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="16 18 22 12 16 6"/>
                                <polyline points="8 6 2 12 8 18"/>
                            </svg>
                            <p>No files selected</p>
                            <p class="empty-subtitle">Add images or text files to convert to PDF</p>
                        </div>
                    </div>
                </div>

                <!-- Watermark Tool -->
                <div class="tool-panel" id="watermark-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Add Watermark</h2>
                        <div class="panel-actions">
                            <input type="file" id="watermarkFileInput" accept=".pdf" style="display: none;">
                            <button class="btn btn-outline" onclick="document.getElementById('watermarkFileInput').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Select PDF
                            </button>
                        </div>
                    </div>
                    <div class="watermark-options" id="watermarkOptions" style="display: none;">
                        <div class="option-group">
                            <label class="option-label">Watermark Text:</label>
                            <input type="text" id="watermarkText" placeholder="Enter watermark text">
                        </div>
                        <div class="option-group">
                            <label class="option-label">Opacity:</label>
                            <input type="range" id="watermarkOpacity" min="0.1" max="1" step="0.1" value="0.5">
                            <span id="opacityValue">50%</span>
                        </div>
                        <div class="option-group">
                            <label class="option-label">Position:</label>
                            <select id="watermarkPosition">
                                <option value="center">Center</option>
                                <option value="top-left">Top Left</option>
                                <option value="top-right">Top Right</option>
                                <option value="bottom-left">Bottom Left</option>
                                <option value="bottom-right">Bottom Right</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="addWatermark()" id="watermarkBtn">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            Add Watermark
                        </button>
                    </div>
                    <div class="empty-state" id="watermarkEmptyState">
                        <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <p>No PDF selected</p>
                        <p class="empty-subtitle">Select a PDF file to add watermark</p>
                    </div>
                </div>

                <!-- Optimizer Tool -->
                <div class="tool-panel" id="optimizer-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Optimize PDF</h2>
                        <div class="panel-actions">
                            <input type="file" id="optimizerFileInput" accept=".pdf" style="display: none;">
                            <button class="btn btn-outline" onclick="document.getElementById('optimizerFileInput').click()">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Select PDF
                            </button>
                        </div>
                    </div>
                    <div class="optimizer-options" id="optimizerOptions" style="display: none;">
                        <div class="option-group">
                            <label class="option-label">Optimization Level:</label>
                            <select id="optimizationLevel">
                                <option value="low">Low (Minimal compression)</option>
                                <option value="medium" selected>Medium (Balanced)</option>
                                <option value="high">High (Maximum compression)</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label class="option-label">
                                <input type="checkbox" id="removeMetadata" checked>
                                Remove metadata
                            </label>
                        </div>
                        <div class="option-group">
                            <label class="option-label">
                                <input type="checkbox" id="compressImages" checked>
                                Compress images
                            </label>
                        </div>
                        <button class="btn btn-primary" onclick="optimizePDF()" id="optimizeBtn">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M3 3v18h18"/>
                                <path d="M7 12l3-3 3 3 5-5"/>
                            </svg>
                            Optimize PDF
                        </button>
                    </div>
                    <div class="empty-state" id="optimizerEmptyState">
                        <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M3 3v18h18"/>
                            <path d="M7 12l3-3 3 3 5-5"/>
                        </svg>
                        <p>No PDF selected</p>
                        <p class="empty-subtitle">Select a PDF file to optimize</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner">
                <svg class="spinner" viewBox="0 0 50 50">
                    <circle class="path" cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="2" stroke-miterlimit="10"/>
                </svg>
            </div>
            <p class="loading-text">Processing...</p>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- Help Modal -->
        <div class="modal-overlay" id="helpModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>PDF Toolkit Help</h3>
                    <button class="modal-close" onclick="hideHelp()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="help-section">
                        <h4>PDF Viewer</h4>
                        <p>View PDF files with zoom controls and page navigation. Supports drag-and-drop functionality.</p>
                    </div>
                    <div class="help-section">
                        <h4>Merge PDFs</h4>
                        <p>Combine multiple PDF files into a single document. Files will be merged in the order they are added.</p>
                    </div>
                    <div class="help-section">
                        <h4>Split PDF</h4>
                        <p>Extract specific pages or split each page into separate PDF files.</p>
                    </div>
                    <div class="help-section">
                        <h4>Extract Text</h4>
                        <p>Extract all text content from PDF files. Useful for content analysis or conversion.</p>
                    </div>
                    <div class="help-section">
                        <h4>Convert Files</h4>
                        <p>Convert images and text files to PDF format, or extract PDF pages as images.</p>
                    </div>
                    <div class="help-section">
                        <h4>Add Watermark</h4>
                        <p>Add text watermarks to PDF pages with customizable opacity and positioning.</p>
                    </div>
                    <div class="help-section">
                        <h4>Optimize PDF</h4>
                        <p>Reduce PDF file size by compressing images and removing unnecessary metadata.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>