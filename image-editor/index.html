<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelCraft Pro - Advanced Image Editor</title>
    <link rel="stylesheet" href="image-editor.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Navigation Header -->
        <nav class="navbar">
            <div class="nav-brand">
                <div class="brand-icon">
                    <i class="fas fa-magic"></i>
                </div>
                <span class="brand-text">PixelCraft Pro</span>
            </div>
            <div class="nav-actions">
                <button class="nav-btn" id="uploadBtn" title="Upload Image">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Upload</span>
                </button>
                <button class="nav-btn nav-btn-success" id="downloadBtn" disabled title="Download Image">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </button>
                <button class="nav-btn nav-btn-ghost" id="helpBtn" title="Help">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </nav>

        <!-- Main Application -->
        <main class="app-main">
            <!-- Sidebar Panel -->
            <aside class="sidebar">
                <div class="sidebar-content">
                    <!-- Basic Tools -->
                    <div class="tool-section">
                        <div class="section-header">
                            <i class="fas fa-tools"></i>
                            <h3>Basic Tools</h3>
                        </div>
                        <div class="tool-grid">
                            <button class="tool-card" data-tool="crop">
                                <i class="fas fa-crop"></i>
                                <span>Crop</span>
                            </button>
                            <button class="tool-card" data-tool="rotate">
                                <i class="fas fa-undo"></i>
                                <span>Rotate</span>
                            </button>
                            <button class="tool-card" data-tool="flip">
                                <i class="fas fa-arrows-alt-h"></i>
                                <span>Flip</span>
                            </button>
                            <button class="tool-card" data-tool="resize">
                                <i class="fas fa-expand-arrows-alt"></i>
                                <span>Resize</span>
                            </button>
                        </div>
                    </div>

                    <!-- Adjustments -->
                    <div class="tool-section">
                        <div class="section-header">
                            <i class="fas fa-sliders-h"></i>
                            <h3>Adjustments</h3>
                        </div>
                        <div class="adjustment-controls">
                            <div class="slider-group">
                                <label>
                                    <i class="fas fa-sun"></i>
                                    <span>Brightness</span>
                                    <span class="value" data-filter="brightness">100%</span>
                                </label>
                                <input type="range" id="brightness" min="0" max="200" value="100">
                            </div>
                            <div class="slider-group">
                                <label>
                                    <i class="fas fa-adjust"></i>
                                    <span>Contrast</span>
                                    <span class="value" data-filter="contrast">100%</span>
                                </label>
                                <input type="range" id="contrast" min="0" max="200" value="100">
                            </div>
                            <div class="slider-group">
                                <label>
                                    <i class="fas fa-palette"></i>
                                    <span>Saturation</span>
                                    <span class="value" data-filter="saturation">100%</span>
                                </label>
                                <input type="range" id="saturation" min="0" max="200" value="100">
                            </div>
                            <div class="slider-group">
                                <label>
                                    <i class="fas fa-circle-notch"></i>
                                    <span>Hue</span>
                                    <span class="value" data-filter="hue">0Â°</span>
                                </label>
                                <input type="range" id="hue" min="0" max="360" value="0">
                            </div>
                            <div class="slider-group">
                                <label>
                                    <i class="fas fa-eye-dropper"></i>
                                    <span>Blur</span>
                                    <span class="value" data-filter="blur">0px</span>
                                </label>
                                <input type="range" id="blur" min="0" max="10" value="0" step="0.1">
                            </div>
                        </div>
                    </div>

                    <!-- Filters & Effects -->
                    <div class="tool-section">
                        <div class="section-header">
                            <i class="fas fa-filter"></i>
                            <h3>Filters & Effects</h3>
                        </div>
                        <div class="filter-grid">
                            <button class="filter-card" data-effect="grayscale">
                                <div class="filter-preview grayscale"></div>
                                <span>Grayscale</span>
                            </button>
                            <button class="filter-card" data-effect="sepia">
                                <div class="filter-preview sepia"></div>
                                <span>Sepia</span>
                            </button>
                            <button class="filter-card" data-effect="invert">
                                <div class="filter-preview invert"></div>
                                <span>Invert</span>
                            </button>
                            <button class="filter-card" data-effect="vintage">
                                <div class="filter-preview vintage"></div>
                                <span>Vintage</span>
                            </button>
                            <button class="filter-card" data-effect="cool">
                                <div class="filter-preview cool"></div>
                                <span>Cool</span>
                            </button>
                            <button class="filter-card" data-effect="warm">
                                <div class="filter-preview warm"></div>
                                <span>Warm</span>
                            </button>
                        </div>
                    </div>

                    <!-- Background Tools -->
                    <div class="tool-section">
                        <div class="section-header">
                            <i class="fas fa-layer-group"></i>
                            <h3>Background</h3>
                        </div>
                        <div class="background-tools">
                            <button class="action-btn action-btn-warning" id="removeBackground">
                                <i class="fas fa-eraser"></i>
                                Remove Background
                            </button>
                            <div class="background-options">
                                <div class="color-picker-group">
                                    <label>Solid Color</label>
                                    <div class="color-input-wrapper">
                                        <input type="color" id="bgColor" value="#ffffff">
                                        <button class="apply-btn" id="applyBgColor">
                                            Apply
                                        </button>
                                    </div>
                                </div>
                                <div class="file-upload-group">
                                    <label for="bgImage">Background Image</label>
                                    <input type="file" id="bgImage" accept="image/*">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- History Controls -->
                    <div class="tool-section">
                        <div class="section-header">
                            <i class="fas fa-history"></i>
                            <h3>History</h3>
                        </div>
                        <div class="history-controls">
                            <button class="action-btn" id="undoBtn">
                                <i class="fas fa-undo"></i>
                                Undo
                            </button>
                            <button class="action-btn" id="redoBtn">
                                <i class="fas fa-redo"></i>
                                Redo
                            </button>
                            <button class="action-btn action-btn-danger" id="resetBtn">
                                <i class="fas fa-refresh"></i>
                                Reset
                            </button>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Canvas Workspace -->
            <section class="workspace">
                <div class="workspace-header">
                    <div class="canvas-info">
                        <span id="imageInfo">No image loaded</span>
                    </div>
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoomOut">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <span class="zoom-level" id="zoomLevel">100%</span>
                        <button class="zoom-btn" id="zoomIn">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <button class="zoom-btn" id="fitScreen">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>

                <div class="canvas-container">
                    <!-- Drop Zone -->
                    <div class="drop-zone" id="dropZone">
                        <div class="drop-content">
                            <div class="upload-illustration">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h2>Drag & drop your image here</h2>
                            <p>or click to browse from your device</p>
                            <div class="supported-formats">
                                <span class="format-tag">JPG</span>
                                <span class="format-tag">PNG</span>
                                <span class="format-tag">GIF</span>
                                <span class="format-tag">WebP</span>
                            </div>
                        </div>
                    </div>

                    <!-- Canvas -->
                    <div class="canvas-wrapper" id="canvasWrapper" style="display: none;">
                        <canvas id="canvas"></canvas>
                    </div>

                    <!-- Crop Overlay -->
                    <div class="crop-overlay" id="cropOverlay">
                        <div class="crop-container" id="cropContainer">
                            <div class="crop-selection" id="cropSelection">
                                <!-- Corner handles -->
                                <div class="crop-handle corner nw" data-cursor="nw-resize"></div>
                                <div class="crop-handle corner ne" data-cursor="ne-resize"></div>
                                <div class="crop-handle corner sw" data-cursor="sw-resize"></div>
                                <div class="crop-handle corner se" data-cursor="se-resize"></div>
                                <!-- Edge handles -->
                                <div class="crop-handle edge n" data-cursor="n-resize"></div>
                                <div class="crop-handle edge s" data-cursor="s-resize"></div>
                                <div class="crop-handle edge w" data-cursor="w-resize"></div>
                                <div class="crop-handle edge e" data-cursor="e-resize"></div>
                                <!-- Center drag area -->
                                <div class="crop-drag-area"></div>
                            </div>
                        </div>
                        <div class="crop-toolbar">
                            <div class="crop-info">
                                <span id="cropDimensions">0 Ã— 0</span>
                            </div>
                            <div class="crop-actions">
                                <button class="crop-btn crop-btn-cancel" id="cancelCrop">
                                    <i class="fas fa-times"></i>
                                    Cancel
                                </button>
                                <button class="crop-btn crop-btn-apply" id="applyCrop">
                                    <i class="fas fa-check"></i>
                                    Apply Crop
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Resize Modal -->
        <div class="modal" id="resizeModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Resize Image</h3>
                    <button class="modal-close" id="closeResize">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="input-group">
                        <label>Width (px)</label>
                        <input type="number" id="resizeWidth" min="1">
                    </div>
                    <div class="input-group">
                        <label>Height (px)</label>
                        <input type="number" id="resizeHeight" min="1">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="maintainRatio" checked>
                        <label for="maintainRatio">Maintain aspect ratio</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-btn modal-btn-cancel" id="cancelResize">Cancel</button>
                    <button class="modal-btn modal-btn-primary" id="applyResize">Apply</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <p class="loading-text">Processing image...</p>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- Hidden file input -->
        <input type="file" id="fileInput" accept="image/*" style="display: none;">
    </div>

    <script src="../js/fileValidator.js"></script>
    <script src="image-editor.js"></script>
    <script src="../js/uiHelper.js"></script>
</body>
</html>